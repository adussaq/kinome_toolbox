!function(e){"use strict";var t,n,i,a,r,s,o,l,c,u,d,p,f,m,h,v,_,b,g,j,y={},w={};l={name:["set_up_table","fully_parse"],"1.0.0":["set_up_table","outlier_tab","level_1_build"],"1.0.1":["set_up_table","level_1_build","normalize_background_tab"],"1.1.2":["set_up_table","level_1_build"],"2.0.1":["set_up_table","measurement-reproducibility","reproduce","anova","heatmap"],"2.1.2":["set_up_table","measurement-reproducibility","reproduce","anova","heatmap"],peptide_picker:"./plugins/peptide_picker/peptide_picker.js",shiftToMin:"./js/web_main.js",amd_ww:"./js/lib/amd_ww/amd_ww.3.1.0.min.js",enrich_kinome:"./js/lib/enrich_kinome.js",outlier:"./js/lib/quality_filtration.min.js",normalize_background:"./js/lib/background_normalization.js",fit_curves:"./js/lib/parameterize_curves.js",webpage:"./js/client/webpage.js",set_up_table:"./js/client/set_up_table.js",level_1_build:"./plugins/level_1_display/level_1_build.js","img-picker":"./plugins/img_picker/img_picker.js","equation-picker":"./js/client/plugins/equation_picker.js",fit:"./js/client/plugins/fit_one/fit_one.js",hcluster:"./plugins/heat_map/hcluster.js",gradient:"./plugins/gradient/gradient.js",fully_parse:"./js/client/tabBuilders/fully_parse_file.js",outlier_tab:"./js/client/tabBuilders/outlier.js",normalize_background_tab:"./js/client/tabBuilders/normalize_background.js",level_1_display:"./plugins/level_1_display/level_1_display.js",reproduce:"./js/client/tabBuilders/reproducibility.js",anova:"./js/client/tabBuilders/anova.js",heatmap:"./plugins/heat_map/heat_map.js","measurement-reproducibility":"./js/client/tabBuilders/measurementReproduce.js","bs_toggle-js":"./js/client/general/bootstrap-toggle.min.js","bs_toggle-css":"https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css",d3:"./js/client/general/d3.min.js","bs_slider-js":"./js/client/general/bootstrap-slider.min.js","bs_slider-css":"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.8.0/css/bootstrap-slider.min.css","peptide_picker-css":"./plugins/peptide_picker/peptide_picker.css"},e.KINOME=y,google.charts.load("current",{packages:["corechart"]}),(p=new Dexie("require_cache")).version(1).stores({require_cache:"url"}),f=p.require_cache,h=p.open(),b="_id",g={dexie_db:new Dexie("kinome"),collections:{name:"","lvl_1.0.0":"","lvl_1.0.1":"","lvl_1.1.2":"","lvl_2.0.1":"","lvl_2.1.2":""},get:function(e,t){return this.collections[e].then(function(e){return void 0===t?e.toArray():e.where("_id").equals(t).toArray()})},upsert:function(e,t){return this.collections[e].then(function(e){return void 0!==t[b]?t[b]=t[b].toString():t[b]=_(),e.put(t).then(function(){return!0})})}},function(){var e,t={},n=Object.keys(g.collections);n.map(function(e){t["$"+e]="_id"}),g.dexie_db.version(1).stores(t),e=g.dexie_db.open(),n.map(function(t){g.collections[t]=e.then(function(){return g.dexie_db["$"+t]})})}(),r=function(e,t){var n,i,a,r,s,o,l,c;for(a='\\?find=\\{"name_id":(\\{"\\$in":\\[("'+(i="[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}")+'",*)+\\]\\}|"'+i+'")\\}|'+i+"$",a=new RegExp(a,"i"),r=new RegExp(/[\s\S]+name\/*$/i),18e5,l=new Date-new Date(t),o=!1,c=!1,s=[{limit:864e5,regex:r},{limit:7776e6,regex:a},{limit:7776e6,regex:/\.css$/}],n=0;!c&&n<s.length;n+=1)e.match(s[n].regex)&&(c=!0,l<s[n].limit&&(o=!0));return!c&&l<18e5&&(o=!0),o},a=function(){var e,t=[],n=!1;return e=function(e){return function(){return e[2].then(function(t){return"function"==typeof t?e[0](t()):e[0](t),!0})}},function(i,a,r,s,o){var l;n||(n=!0),o?t.unshift([i,r,s]):t.push([i,r,s]),s.then(function(){var i;if(0===Object.keys(w).length&&t.length){for(i=Promise.resolve();t.length;)l=t.pop(),i=i.then(e(l));i.then(function(){n=!1}).catch(function(){})}}).catch(function(e){a(e)})}}(),y.formatEquation=M.sToMathE,m=function(e,t){return h.then(function(){var n=f.where("url").equals(e);return void 0===t||t?n.toArray().then(function(t){return 1===t.length&&r(e,t[0].time)?t[0].text:n.delete()}):n.delete()})},j=function(e){return new Promise(function(t,n){jQuery.ajax(e).then(function(e){t(e)},function(e){n(e)})})},d=function(e,t){return h.then(function(){return f.put({url:e,text:t,time:String(new Date)})})},o=function(e,n,i){var r,s,c,u,d,p,f,m=!1,h=[],v=Math.random().toString();if(s=e,c=!1,Array.isArray(s)?e="[array]("+s.length+")"+(n?" of "+n:""):l.hasOwnProperty(s)&&(s=l[s]),"string"==typeof s)p=(u=t(s,n)).func,c=u.blocking,f=p?p(s,i):Promise.reject("Type parameter (2nd in require function) was not recognized, valid types are: json, scrip, style, and text. This can also be a blank string and the file extension will be used.");else if(Array.isArray(s)){for(r=0;r<s.length;r+=1)h.push(o(s[r],n,i));f=Promise.all(h).then(function(e){return e})}else"function"==typeof s?(c=!0,m=!0,e="function",f=new Promise(function(e){setTimeout(function(){e(s)},200)})):f=Promise.reject("Require only accepts strings, arrays or callback functions.");return c&&(w[v]=1),f.then(function(e){return delete w[v],e}).catch(function(e){return delete w[v],e}),c?d=new Promise(function(t,n){a(t,n,e,f,m)}):(f.then(function(e){return e}),d=f),d},t=function(e,t){var a,r=!1;return t?t.match(/^js$|scripts*|codes*/im)?(a=c,r=!0):t.match(/json|data/i)?a=n:t.match(/styles*|css/)?a=i:t.match(/txts*|texts*|strings*/)&&(a=s):e.match(/\.js\s*$/i)?(a=c,r=!0):e.match(/\.css\s*$/i)?a=i:e.match(/\.json\s*$/i)?a=n:e.match(/\.txt\s*$/i)?a=s:e.match(/\.jseq\s*$/i)?a=s:(a=c,r=!0),{func:a,blocking:r}},v=function(e){var t=e.split(/[?&]+/),n=(e=t.shift()).split(/[\/:]+/);n.shift();var i=n.shift(),a=n.shift();return t.length&&console.warn("Sorry local does not support queries at this time. You may search by collection and id only."),g.get(i,a).then(function(e){return e})},c=function(){var e={};return function(t){var n;return e[t]?n=e[t]:(n=j({url:t,dataType:"script"}).then(function(){return!0}),e[t]=n),n}}(),s=function(){var e={};return function(t,n){var i;return e[t]?i=e[t]:(i=m(t,n).then(function(e){return"string"==typeof e?e:j({url:t,dataType:"text"}).then(function(e){return d(t,e),e})}),e[t]=i),i}}(),n=function(e,t){return e.match(/^local\:/)?v(e).then(function(e){return e}):s(e,t).then(function(e){return JSON.parse(e)})},i=function(e,t){return s(e,t).then(function(e){return $('<style type="text/css"></style>').html(e).appendTo("head"),!0})},o.defaults=l,e.require=o,e.save=function(){var e=document.createElement("a");return e.setAttribute("style","display: none"),document.head.appendChild(e),function(t,n){var i=new Blob([t],{type:"octet/stream"}),a=window.URL.createObjectURL(i);e.href=a,e.download=n,e.click(),window.URL.revokeObjectURL(a)}}(),y.page=$("#main_page"),(u=[[$("#8283479327500567"),$("#22225356192030654")],[$("#about_tab"),$("#about_click").parent()],[y.page,$("#5948670235572466").parent()]]).hide=function(){this.map(function(e){e[0].hide(),e[1].removeClass("active")}),$("#menu-drop-active").removeClass("active")},u.show=function(e){var t=u[e];t[0].show({duration:0,complete:function(){t[0].thisShow&&t[0].thisShow()}}),t[1].addClass("active"),e>2&&$("#menu-drop-active").addClass("active")},$("#22225356192030654").click(function(e){e.preventDefault(),u.hide(),u.show(0)}),$("#5948670235572466").click(function(e){e.preventDefault(),u.hide(),u.show(2)}),$("#about_click").click(function(e){e.preventDefault(),u.hide(),u.show(1)}),_=function(){var e,t,n;for(e=1,t="";e<37;)n=15^e?8^Math.random()*(20^e?16:4):4,t+=51*e&52?n.toString(16):"-",e+=1;return t},o.database=g,o.store=function(e,t){return g.upsert(e,t)},y.addAnalysis=function(e){var t,n,i,a,r=Math.random().toString().replace(/0\./,"");return a=u.length,$("<div>",{style:"clear: left;"}).appendTo("body"),t=$("<div>",{class:"container",style:"display: none",id:"div"+r}).appendTo("body"),n=$("<li>"),i=$("<a>",{href:"#",text:e}).click(function(e){e.preventDefault(),u.hide(),u.show(a)}),$("#analysesMenu").append(n.append(i)),t.onshow=function(e){t.thisShow=function(){e(),t.thisShow=function(){}}},u.push([t,n]),t},y.error=function(e,t){if(console.error(e,t),void 0!==t){var n=$('<div class="alert alert-danger alert-dismissable fade in"></div>'),i=$('<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a></div>'),a=$("<div>",{class:"row"}),r=$("<div>",{class:"col col-xs-10 col-sm-11",html:"<span>Error:&nbsp;</span>"}),s=$("<div>",{class:"col col-xs-2 col-sm-1"});r.append(t),s.append(i),a.append(r).append(s),n.append(a),$("#status").append(n)}},y.warn=function(e){var t=$('<div style="display: table;width:100%;" class="alert alert-warning alert-dismissable fade in"></div>');return $("<div>",{style:"display: table-cell; vertical-align: middle;",class:"row"}).appendTo(t).append($("<div>",{class:"col col-xs-10 col-sm-11"}).append(e)).append($("<div>",{class:"col col-xs-2 col-sm-1"}).append('<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a></div>')),$("#status").append(t),t};var k=!1;$("#KINOME-modal-div").on("hide.bs.modal",function(){k=!1}),$("#KINOME-modal-div").on("hidden.bs.modal",function(){k&&$("#KINOME-modal-div").modal("show")}),y.alert=function(e){$("#KINOME-alert-text").empty().append(e),k||(k=!0,$("#KINOME-modal-div").modal("show")),setTimeout(function(){k||(k=!0,$("#KINOME-modal-div").modal("show"))},1e3)},y.get=function(e){var t,n,i=[],a=(e=e||{}).id,r=e.group;return t=void 0!==e.level?e.level:"[\\s\\S]*",t=new RegExp(t,"i"),n=void 0!==e.name?e.name:"[\\s\\S]*",n=new RegExp(n,"i"),y.params.data.map(function(e,s){e.value.map(function(e){!e.level.match(t)||void 0!==r&&s!==r||!e.name.match(n)||void 0!==a&&a!==e.name_id||(e.hasOwnProperty("group")||Object.defineProperty(e,"group",{value:s,enumerable:!1}),i.push(e))})}),y.enrich(i)},y.list=function(e){"string"!=typeof(e=e||"")&&(e="",console.warn("list should only be passed a string"));var t=[],n=[],i=[],a={},r=[];return y.params.data.map(function(e,r){t.push(r),e.value.map(function(e){a[e.level]=1,i.push(e.name),n.push(e.name_id)})}),r=Object.keys(a),""===e?{levels:r,names:i,ids:n,groups:t}:e.match(/level/i)?r:e.match(/name/i)?i:e.match(/group/i)?t:[]}}("undefined"!=typeof module&&module.exports?module.exports:window);