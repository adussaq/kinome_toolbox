!function(e){"use strict";var t,n,a,r,i,o,s,u,c,l,p,d,f,h,m,v={},b={};u={name:["set_up_table"],"1.0.0":["set_up_table","outlier_tab","pparameter_display"],"1.0.1":["set_up_table","pparameter_display"],"1.1.2":["set_up_table","pparameter_display"],"2.0.1":["set_up_table"],"2.1.2":["set_up_table"],shiftToMin:"./js/web_main.js",amd_ww:"./js/lib/amd_ww.3.1.0.min.js",enrich_kinome:"./js/lib/enrich_kinome.js",outlier:"./js/lib/quality_filtration.min.js",normalize_background:"./js/lib/background_normalization.js",fit_curves:"./js/lib/parameterize_curves.js",outlier_tab:"./js/client/outlier.js",pparameter_display:"http://mischiefmanaged.tk/pparameter_display.js",webpage:"./js/client/webpage.js",set_up_table:"./js/client/set_up_table.js"},e.KINOME=v,google.charts.load("current",{packages:["corechart"]}),(d=new Dexie("require_cache")).version(1).stores({require_cache:"url"}),f=d.require_cache,m=d.open(),i=function(e,t){var n,a,r,i,o,s,u,c;for(r='\\?find=\\{"name_id":(\\{"\\$in":\\[("'+(a="[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}")+'",*)+\\]\\}|"'+a+'")\\}',r=new RegExp(r,"i"),i=new RegExp(/[\s\S]+name\/*$/i),18e5,u=new Date-new Date(t),s=!1,c=!1,o=[{limit:864e5,regex:i},{limit:7776e6,regex:r}],n=0;!c&&n<o.length;n+=1)e.match(o[n].regex)&&(c=!0,u<o[n].limit&&(s=!0));return!c&&u<18e5&&(s=!0),s},r=function(){var e,t=[],n=!1;return e=function(e){return function(t){e[0](t)}},function(a,r,i,o){var s,u;n||(n=!0),t.push([a,i,o]),o.then(function(){if(0===Object.keys(b).length){for(u=[];t.length&&0===Object.keys(b).length;)s=t.pop(),u.push(s[2].then(e(s)));Promise.all(u).then(function(){n=!1}).catch(function(){})}}).catch(function(e){r(e)})}}(),v.db=function(){var e=new Dexie("KINOME");return e.version(1).stores({KINOME:"url"}),$("#about_tab").append('<div class="text-center"><p>This tool uses IndexedDB to store data to pull it for future use. If you would like to clear that click below. (Page load times will increase signifcantly, but temporarily.)</p><button class="btn-lg btn btn-primary" onclick="KINOME.db.db.clear()">Clear Saved</button><p>Specific data queries will be saved for 90 days, the names database for 1 day and general data query results for 30 minutes.</p></div>'),{open:e.open(),db:e.KINOME}}(),h=function(e,t){return m.then(function(){var n=f.where("url").equals(e);return void 0===t||t?n.toArray().then(function(t){return 1===t.length&&i(e,t[0].time)?t[0].text:n.delete()}):n.delete()})},p=function(e,t){return m.then(function(){return f.put({url:e,text:t,time:String(new Date)})})},s=function(e,n,a){var i,o,c,l,p,d,f,h=[],m=Math.random().toString();if(o=e,c=!1,Array.isArray(o)?e="[array]("+o.length+")"+(n?" of "+n:""):u.hasOwnProperty(o)&&(o=u[o]),"string"==typeof o)d=(l=t(o,n)).func,(c=l.blocking)&&(b[m]=1),f=d?d(o,a):Promise.reject("Type parameter (2nd in require function) was not recognized, valid types are: json, scrip, style, and text. This can also be a blank string and the file extension will be used.");else if(Array.isArray(o)){for(i=0;i<o.length;i+=1)h.push(s(o[i],n,a));f=Promise.all(h).then(function(e){return e})}else f=Promise.reject("Require only accepts strings or arrays.");return f.then(function(e){return delete b[m],e}).catch(function(e){return delete b[m],e}),c?p=new Promise(function(t,n){r(t,n,e,f)}):(f.then(function(e){return e}),p=f),p},t=function(e,t){var r,i=!1;return t?t.match(/^js$|scripts*|codes*/i)?(r=c,i=!0):t.match(/json|data/i)?r=n:t.match(/styles*|css/)?r=a:t.match(/texts*|strings*/)&&(r=o):e.match(/\.js\s*$/i)?(r=c,i=!0):r=e.match(/\.css\s*$/i)?a:e.match(/\.json\s*$/i)?n:o,{func:r,blocking:i}},c=function(){var e={};return function(t){var n;return e[t]?n=e[t]:(n=jQuery.ajax({url:t,dataType:"script"}).then(function(){return!0}),e[t]=n),n}}(),o=function(){var e={};return function(t,n){var a;return e[t]?a=e[t]:(a=h(t,n).then(function(e){return"string"==typeof e?e:jQuery.ajax({url:t,dataType:"text"}).then(function(e){return p(t,e),e})}),e[t]=a),a}}(),n=function(e,t){return o(e,t).then(function(e){return JSON.parse(e)})},a=function(e,t){return o(e,t).then(function(e){return $('<style type="text/css"></style>').html(e).appendTo("head"),!0})},s.defaults=u,e.require=s,e.save=function(){var e=document.createElement("a");return e.setAttribute("style","display: none"),document.head.appendChild(e),function(t,n){var a=new Blob([t],{type:"octet/stream"}),r=window.URL.createObjectURL(a);e.href=r,e.download=n,e.click(),window.URL.revokeObjectURL(r)}}(),v.page=$("#main_page"),(l=[[v.page,$("#home_click")],[$("#about_tab"),$("#about_click").parent()]]).hide=function(){this.map(function(e){e[0].hide(),e[1].removeClass("active")}),$("#menu-drop-active").removeClass("active")},l.show=function(e){var t=l[e];t[0].show({duration:0,complete:function(){t[0].thisShow&&t[0].thisShow()}}),t[1].addClass("active"),e>1&&$("#menu-drop-active").addClass("active")},$(".toHome").click(function(e){e.preventDefault(),l.hide(),l.show(0)}),$("#about_click").click(function(e){e.preventDefault(),l.hide(),l.show(1)}),v.addAnalysis=function(e){var t,n,a,r,i=Math.random().toString().replace(/0\./,"");return r=l.length,t=$("<div>",{class:"container",style:"display: none",id:"div"+i}).appendTo("body"),n=$("<li>"),a=$("<a>",{href:"#",text:e}).click(function(e){e.preventDefault(),l.hide(),l.show(r)}),$("#analysesMenu").append(n.append(a)),t.onshow=function(e){t.thisShow=function(){e(),t.thisShow=function(){}}},l.push([t,n]),t},v.error=function(e,t){console.error(e,t),void 0!==t&&$("#status").append('<div class="alert alert-danger alert-dismissable fade in">Error: '+t+'<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a></div>')},v.get=function(e){var t,n,a=[],r=(e=e||{}).id,i=e.group;return t=new RegExp(void 0!==e.level?e.level:"","i"),n=new RegExp(void 0!==e.name?e.name:"","i"),v.params.data.map(function(e,o){e.value.map(function(e){!e.level.match(t)||void 0!==i&&o!==i||!e.name.match(n)||void 0!==r&&r!==e.name_id||(e.hasOwnProperty("group")||Object.defineProperty(e,"group",{value:o,enumerable:!1}),a.push(e))})}),v.enrich(a)},v.list=function(e){"string"!=typeof(e=e||"")&&(e="",console.warn("list should only be passed a string"));var t=[],n=[],a=[],r={},i=[];return v.params.data.map(function(e,i){t.push(i),e.value.map(function(e){r[e.level]=1,a.push(e.name),n.push(e.name_id)})}),i=Object.keys(r),""===e?{levels:i,names:a,ids:n,groups:t}:e.match(/level/i)?i:e.match(/name/i)?a:e.match(/group/i)?t:[]}}("undefined"!=typeof module&&module.exports?module.exports:window);