!function(e){"use strict";var t,a,i,r,n,l;i="./models/cyclingEq_3p_hyperbolic.jseq";var o=require(i,"text");require("amd_ww"),require("enrich_kinome"),require("outlier"),require("level_1_display"),a=function(e){l=e.replace(/\/\/[^\n]*/g,"").replace(/\s+/g," "),t.append("<div>This script fits all of the level 1.0.0 curves, linear first, to detect outliers. If applicable it will add in cycle slopes to fit for the non-linear fits. If not then that will be skipped. This can take several minutes to run and is not designed for more than 40 samples at a time (For that please use the command line interface). Once you start the fitting, two loading bars will appear. When they are complete you will be able to see what points have been removed, look at the fits with link to the appropriate images. The resultant array will be colored by the number of outliers per spot.<div>"),$("<button>",{style:"margin: 15px;",class:"btn btn-primary btn-lg",text:"Begin Fits."}).click(r).appendTo($("<div>",{class:"text-center"}).appendTo(t))},r=function(e){e.preventDefault();var a,i;a=KINOME.get({level:"1.0.0"}),i=function(e){t.append("<div>",{text:e});var a=$("<div>",{class:"progress-bar",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:"width: 0%"}).appendTo($('<div class="progress"></div>').appendTo(t));return function(e){var t,i;t=setInterval(function(){e.done===e.total&&clearInterval(t),i=e.done/e.total*100,i=i.toFixed(2),a.attr("aria-valuenow",i),a.attr("style","width: "+i+"%"),a.text(i+"%")},100)}},KINOME.filter({data:a,amd_ww:amd_ww,equation:l,worker:"./js/lib/fitCurvesWorker.min.js",number_threads:4,linearUpdate:i("Linear Fits"),kineticUpdate:i("Kinetic Fits")}).then(function(e){n(e)})},n=function(e){var a=KINOME.levelOneDisplay(e);a.setColorFunc(function(e,t){var a,i,r,n,l,o,s=-1/0,p=1/0,d=[];for(a=0;a<e.length;a+=1){for(o=0,n=t.sample.get({peptide:e[a].peptide,exposure:e[a].exposure}),l=t.sample.get({peptide:e[a].peptide,cycle:e[a].cycle}),i=0;i<n.length;i+=1)(r=n[i]).hasOwnProperty("signal_valid")&&!r.signal_valid&&(o+=1),r.hasOwnProperty("background_valid")&&!r.background_valid&&(o+=1);for(i=0;i<l.length;i+=1)(r=l[i]).hasOwnProperty("signal_valid")&&!r.signal_valid&&(o+=1),r.hasOwnProperty("background_valid")&&!r.background_valid&&(o+=1);s=Math.max(s,o),p=Math.min(p,o),d.push(o)}return Promise.resolve(d.map(function(e){return(e-p)/(s-p)}))}),t.append(a)},t=KINOME.addAnalysis("Find Outliers"),require(function(){o.then(a)})}("undefined"!=typeof module&&module.exports?module.exports:KINOME);