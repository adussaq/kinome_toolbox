!function(e){"use strict";var n,r,t,o;if(t={},"undefined"!=typeof module&&module.exports)o=require("webworker-threads").Worker;else{if(!window.Worker)throw"Workers are not available in this browser.";o=window.Worker}t.start=function(e){return n(e)},n=function(e){e=e||void 0;try{if(!e)throw"Must define start_obj with at least the workers file.";if(e.num_workers=e.num_workers||4,e.num_workers*=1,isNaN(e.num_workers)||"number"!=typeof e.num_workers)throw"num_workers must be an integer";if("string"!=typeof e.filename||!e.filename.match(/\.js$/))throw"Must pass in a filename as a string for worker functionality"}catch(e){return void console.error(e)}return r(e)},r=function(e){var n,r,t,i,u,f,s,a,c;return n=[],r=Object.create(Promise),f=[],r.submit=function(e){return u(e)},r.clear=function(){c=function(){f.map(function(e){e[0].terminate()}),delete r.submit,delete r.clear}},c=function(){},i=function(e){var r,t,o,u,s,a,m=!0;if(a=f[e][0],f[e][1]=!0,!(n.length>0)){for(f[e][1]=!1,r=0;r<f.length;r+=1)f[r][1]&&(m=!1);return void(m&&c())}s=(u=n.shift())[0],t=u[1],o=u[2],a(s).then(function(e){t(e)},function(e){o(e)}).then(function(){i(e)})},u=function(e){return t(n,e)},s=function(){var e;for(e=0;e<f.length;e+=1)if(!f[e][1]){i(e);break}},t=function(e,n){return new Promise(function(r,t){e.push([n,r,t]),s()})},a=function(e){var n,r;return n=new o(e),r=function(e){return new Promise(function(r,t){n.onmessage=function(e){r(e.data)},n.onerror=function(e){t("ERROR: Line "+e.lineno+" in "+e.filename+": "+e.message)},"object"==typeof e?n.postMessage(JSON.parse(JSON.stringify(e))):n.postMessage(e)})},r.terminate=function(){n.terminate()},r},function(){var n;for(n=0;n<e.num_workers;n+=1)f[n]=[a(e.filename),!1]}(),r},e.amd_ww=t}("undefined"!=typeof module&&module.exports?module.exports:window);