!function(e){"use strict";var r,t,n,a,o,s,u,c,i,l,f,p,d;s=[require("enrich_kinome")],r=function(e){var r,t,n=decodeURIComponent(location.href),a=[];for(e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=(r=new RegExp("(?:[\\?&]"+e+'=")([^"]*)"',"g")).exec(n);t;)a.push(t[1]),t=r.exec(n);return console.log(e,a,n),a},p=function(e){return function(r){return console.error("failed to get script: "+e,r),$("#status").append('<div class="alert alert-danger alert-dismissable fade in"><strong><a href='+e+">"+e+'</a></strong> failed to load. Make sure the URL you provided is correct. It it is, please try refreshing the page.<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a></div>'),r}},i=function(e){var r,t,n,a=[];for(n=(t=new RegExp("data=\\*\\[([\\s\\S]+?)\\]\\*","g")).exec(e);n;)a.push(n[1]),n=t.exec(e);for(r=0;r<a.length;r+=1)a[r]=a[r].split(";");return a},a=function(e){return new Promise(function(r,t){$.ajax({url:e,dataType:"text",success:r,error:t})}).catch(p(e))},d=function(e){return new Promise(function(r,t){$.ajax({url:e,dataType:"text",success:function(e){$('<style type="text/css"></style>').html(e).appendTo("head"),r()},error:t})}).catch(p(e))},c=function(e){var r,t,n=[];for(t=function(e){return new Promise(function(r,t){$.ajax({url:e,dataType:"text",success:r,error:t})})},r=0;r<e.length;r+=1)n.push(t(e[r]).catch(p(e[r])));return Promise.all(n).then(function(r){var t,n,a,o=[];for(t=0;t<r.length;t+=1){for(a=JSON.parse(r[t]),Array.isArray(a)||(a=[a]),n=0;n<a.length;n+=1)Object.defineProperty(a[n],"data_origin_url",{enumerable:!1,configurable:!1,writable:!1,value:e[t]});a=KINOME.enrich(a),o=o.concat(a)}return o})},f=function(e){return function(){return require(e).catch(p(e))}},l=r("text"),u=r("style"),t=i(decodeURIComponent(location.href)),n=r("code"),console.log(l,t,n),e.params={},e.params.strings=[],e.params.data=[],e.params.script_urls=n,o=l.map(a).map(function(r,t){return r.then(function(r){e.params.strings[t]={value:r,url:l[t]}})}).concat(u.map(d)),Promise.all(s).then(function(){o=o.concat(t.map(c).map(function(r,n){return r.then(function(r){e.params.data[n]={value:r,url:t[n]}})})),Promise.all(o).then(function(){google.charts.setOnLoadCallback(function(){var e,r=Promise.resolve();for(e=0;e<n.length;e+=1)r=r.then(f(n[e]));r.then(f("webpage"))})}),e.loadData=function(r){return Array.isArray(r)||(r=[r]),c(r).then(function(t){return t=t.map(function(e){return KINOME.enrich(e)}),e.params.data.push({value:t,url:r}),t})}}),e.loadStrings=function(r){return Array.isArray(r)||(r=[r]),a(r).then(function(t){return e.params.strings.push({value:t,url:r}),t})}}("undefined"!=typeof module&&module.exports?module.exports:KINOME);