!function(){"use strict";var e,a,t,n,r,p,l,o,d=KINOME.page;a=function(e){var a,t,n,r,p=[],l={},o={};for(a=0;a<e.length;a+=1){for(n=e[a],(r={url:e[a].url,database:{},table:{}}).table.name=n.name,r.table.group=void 0,r.table.id=n._id,t=0;t<n.sample_data.length;t+=1)r.database[n.sample_data[t].key]?r.database[n.sample_data[t].key]=[r.database[n.sample_data[t].key],n.sample_data[t].value]:(r.database[n.sample_data[t].key]=n.sample_data[t].value,l[n.sample_data[t].key]=1);for(t=0;t<n.run_data.length;t+=1)r.database[n.run_data[t].key]?r.database[n.run_data[t].key]=[r.database[n.run_data[t].key],n.run_data[t].value]:(r.database[n.run_data[t].key]=n.run_data[t].value,o[n.run_data[t].key]=1);p.push(r)}return{data:p,header:Object.keys(l),possible:Object.keys(o),header_options:Object.keys(l).concat(Object.keys(o)).map(function(e){return $('<option value="'+e+'">'+e+"</option>")})}},t=function(e){for(var a,t=e.header,n=e.possible;t.length>3;)t.pop();for(a=0;a<n.length&&t.length<3;a+=1)t.push(n[a]);for(a=0;a<t.length;a+=1)t[a]=[t[a],new RegExp("","i")];return t},n=function(a){var t,n,r,l,o,d;for(d=function(a){return function(t){var n=t.target.value;e.header[a][0]=n,p()}},(t=$("<tr>").appendTo(a)).append("<th>Analysis<br />Group</th>"),t.append("<th>Barcode, Row</th>"),r=0;r<e.header.length;r+=1){for(n=$("<th>").appendTo(t),r>0&&n.addClass("hidden-xs"),n=$("<select>",{class:"form-control"}).appendTo(n),l=0;l<e.header_options.length;l+=1)(o=e.header_options[l].clone()).text()===e.header[r][0]&&o.attr("selected","selected"),n.append(o);n.change(d(r))}},r=function(a){var t,n,r,l;for(r=function(a){return function(t){-2===a?e.group_filter=new RegExp(t.target.value,"i"):-1===a?e.name_filter=new RegExp(t.target.value,"i"):e.header[a][1]=new RegExp(t.target.value,"i"),p()}},l=$("<tr>").appendTo(a),t=-2;t<e.header.length;t+=1)n=$("<th>").appendTo(l),t>0&&n.addClass("hidden-xs"),n=$("<input>",{type:"text",class:"form-control"}).appendTo(n),t>-2?n.attr("placeholder","regex filter"):n.css("max-width","60px"),n.keyup(r(t))},l=function(){var a,t;return t=$("<div>",{class:"text-center"}).appendTo(d),t=$('<nav aria-label="Page navigation"></nav>').appendTo(t),t=$('<ul class="pagination pagination-lg"></ul>').appendTo(t),$('<a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>').click(function(a){a.preventDefault(),e.page=0===e.page?0:e.page-1,p()}).appendTo($("<li>").appendTo(t)),a=$('<a style="color: black" href="#"></a>').click(function(e){e.preventDefault()}).appendTo($("<li>").appendTo(t)),$('<a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>').click(function(a){a.preventDefault(),e.page+=1,p()}).appendTo($("<li>").appendTo(t)),a},o=function(a){var t,n,r,p,l,o,d;for((d=e.link_out).empty(),l="",t=0;t<a.length;t+=1){for(l+="data=*[",p={},n=0;n<a[t].length;n+=1)p[a[t][n].url]=p[a[t][n].url]||[],p[a[t][n].url].push(a[t][n].table.id);for(o=Object.keys(p),n=0;n<o.length;n+=1){for(l+=o[n].replace("names","<database>")+'?find={"names_id":{"$in":["',r=0;r<p[o[n]].length;r+=1)l+=p[o[n]][r]+'","';l=l.replace(/,"$/,"]}};")}l=l.replace(/;$/,"]*&")}l=l.replace(/&$/,""),d.text(l)},p=function(){var a,t,n,r,l,d,i,s,u,c,g,h,f,b,v,_,m,y;for(r=e.element,l=e.page,b=e.name_filter,_=e.group_filter,d=e.entries_per_page,i=e.data,s=e.header,c=-1,"",y=[],r.empty(),u=function(a){return function(t){e.data[a].table.group=t.target.value,p()}},t=0;t<i.length;t+=1)i[t].table.group&&(y[i[t].table.group]=y[i[t].table.group]||[],y[i[t].table.group].push(i[t]),c=Math.max(c,i[t].table.group));for(c+=1,o(y),n=0,g=0,m=0;g<i.length;){for((h=!0)&&!"".match(_)&&(i[g].table.group&&i[g].table.group.match(_)||(h=!1)),h&&!i[g].table.name.match(b)&&(h=!1),t=0;h&&t<s.length;t+=1)f=i[g].database[s[t][0]]||"",Array.isArray(f)&&(f=f.join("\n")),f.match(s[t][1])||(h=!1);if(h&&(m+=1)>l*d&&n<d){for(n+=1,a=$("<tr>").appendTo(r),v=$("<td>").appendTo(a),(v=$("<select>",{class:"form-control"}).appendTo(v)).append("<option selected value>None</option>"),t=0;t<=c;t+=1)1*i[g].table.group===t?v.append('<option selected="true" value="'+t+'">'+t+"</option>"):v.append('<option value="'+t+'">'+t+"</option>");for(v.change(u(g)),v=$("<td>",{text:i[g].table.name}).appendTo(a),t=0;t<s.length;t+=1)v=$("<td>").appendTo(a),t>0&&v.addClass("hidden-xs"),f=i[g].database[s[t][0]]||"",Array.isArray(f)&&(f=f.length<4?f.join("<br/>"):"["+f.slice(0,3).join(f.slice(0,3).join("").length<20?", ":",<br/>")+", ...] ("+f.length+")"),v.html(f)}g+=1}e.pagination.text(e.page+1+" / "+Math.ceil(m/d)),n<1&&(e.page-=1,p())};var i=function(o){var i,s,u;i=a(o),d.empty(),(e={page:0,entries_per_page:8,name_filter:new RegExp("","i"),group_filter:new RegExp("","i")}).data=i.data,e.header=t(i),e.header_options=i.header_options,i={},s=$("<table>",{class:"table"}).appendTo(d),u=$("<thead>").appendTo(s),n(u),r(u),e.element=$("<tbody>").appendTo(s),e.pagination=l(),e.link_out=$("<div>").appendTo(d),p()},s=KINOME.list({level:"name"});s.length&&i(s);var u=KINOME.list({level:"1.0.1"});u.length&&i(u)}();