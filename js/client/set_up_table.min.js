!function(e){"use strict";var a,t,n,o,l,r,p,i=KINOME.page;a=function(e){var a,t,n,o,l=[],r={},p={};for(a=0;a<e.length;a+=1){for(n=e[a],(o={url:e[a].data_origin_url,database:{},table:{}}).table.name=n.name,delete o.table.group,o.table.id=n.name_id,o.origin_db=n,t=0;t<n.sample_data.length;t+=1)o.database[n.sample_data[t].key]?o.database[n.sample_data[t].key]=[o.database[n.sample_data[t].key],n.sample_data[t].value]:(o.database[n.sample_data[t].key]=n.sample_data[t].value,r[n.sample_data[t].key]=1);for(t=0;t<n.run_data.length;t+=1)o.database[n.run_data[t].key]?o.database[n.run_data[t].key]=[o.database[n.run_data[t].key],n.run_data[t].value]:(o.database[n.run_data[t].key]=n.run_data[t].value,p[n.run_data[t].key]=1);l.push(o)}return{data:l,header:Object.keys(r),possible:Object.keys(p),header_options:Object.keys(r).concat(Object.keys(p)).map(function(e){return $('<option value="'+e+'">'+e+"</option>")})}},t=function(e){for(var a,t=e.header,n=e.possible;t.length>3;)t.pop();for(a=0;a<n.length&&t.length<3;a+=1)t.push(n[a]);for(a=0;a<t.length;a+=1)t[a]=[t[a],new RegExp("","i")];return t},n=function(e,a){var t,n,o,r,p,i;for(i=function(e){return function(t){var n=t.target.value;a.header[e][0]=n,l(a)}},(t=$("<tr>").appendTo(e)).append("<th>Analysis<br />Group</th>"),t.append("<th>Barcode, Row</th>"),o=0;o<a.header.length;o+=1){for(n=$("<th>").appendTo(t),o>0&&n.addClass("hidden-xs"),n=$("<select>",{class:"form-control"}).appendTo(n),r=0;r<a.header_options.length;r+=1)(p=a.header_options[r].clone()).text()===a.header[o][0]&&p.attr("selected","selected"),n.append(p);n.change(i(o))}},o=function(e,a){var t,n,o,r;for(o=function(e){return function(t){-2===e?a.group_filter=new RegExp(t.target.value,"i"):-1===e?a.name_filter=new RegExp(t.target.value,"i"):a.header[e][1]=new RegExp(t.target.value,"i"),l(a)}},r=$("<tr>").appendTo(e),t=-2;t<a.header.length;t+=1)n=$("<th>").appendTo(r),t>0&&n.addClass("hidden-xs"),n=$("<input>",{type:"text",class:"form-control"}).appendTo(n),t>-2?n.attr("placeholder","regex filter"):n.css("max-width","60px"),n.keyup(o(t))},r=function(e){var a,t;return t=$("<div>",{class:"text-center"}).appendTo(i),t=$('<nav aria-label="Page navigation"></nav>').appendTo(t),t=$('<ul class="pagination pagination-lg"></ul>').appendTo(t),$('<a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>').click(function(a){a.preventDefault(),e.page=0===e.page?0:e.page-1,l(e)}).appendTo($("<li>").appendTo(t)),a=$('<a style="color: black" href="#"></a>').click(function(e){e.preventDefault()}).appendTo($("<li>").appendTo(t)),$('<a href="#" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>').click(function(a){a.preventDefault(),e.page+=1,l(e)}).appendTo($("<li>").appendTo(t)),a},p=function(e,a){var t,n,o,l,r,p,i,d,s,u=["name","lvl_1.0.0","lvl_1.0.1","lvl_1.1.2","lvl_2.0.1","lvl_2.1.2"],g=[];g=["Name is a small collection containing only meta data. It is meant to allow you to build up groups in different ways. Also when only name data is present you may load in data from your own bionavigator output.","1.0.0 is the raw data for background and signal combined. The only additional information is a flag indicating if the camera's ability to detect changes in signal was saturated.","1.0.1 is the raw data following outlier detection as described in (link will be provided once published).","1.1.2 is the raw data following background normalization as described in (link will be provided once published).",'2.0.1 is the results of curve parameterization as performed on level 1.0.1 data. Non linear curves were parameterized utilizing equation 3 from <a href="https://www.ncbi.nlm.nih.gov/pubmed/27601856">Dussaq et al</a>.','2.1.2 is the results of curve parameterization as performed on level 1.1.2 data. Non linear curves were parameterized utilizing equation 3 from <a href="https://www.ncbi.nlm.nih.gov/pubmed/27601856">Dussaq et al</a>.'];var c=function(e){return e.replace(/\/*\?[\s\S]*$|\/$|\/[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\/*$/gm,"")};for((i=a.link_out).empty(),r="?",t=0;t<e.length;t+=1){for(r+="data=*[",l={},n=0;e[t]&&n<e[t].length;n+=1)l[c(e[t][n].url)]=l[c(e[t][n].url)]||[],l[c(e[t][n].url)].push(e[t][n].table.id);for(p=Object.keys(l),n=0;n<p.length;n+=1){for(r+=c(p[n]).replace(/\/[^\/]+$/,"/<database>")+"/",o=0;o<l[p[n]].length;o+=1)r+=l[p[n]][o]+"|";r=r.replace(/\|$/,";")}r=r.replace(/;$/,""),r+="]*&"}if(r=r.replace(/&$/,""),e.length>0)for(i.append('<h1 class="page-header">Collections Possible</h1>'),s=$("<div>",{class:"row",style:"margin-bottom:20px;"}).appendTo(i),d=$("<dl>",{class:"dl-horizontal"}).appendTo($("<div>",{class:"col col-xs-12"}).appendTo(s)),t=0;t<u.length;t+=1)d.append('<dt><a class="lead" href="'+r.replace(/<database>/g,u[t]).replace(/"/g,"%22")+'">'+u[t]+'</a></dt><dd><p style="margin-bottom:20px;">'+g[t]+"</p></dd>")},l=function(e){var a,t,n,o,r,i,d,s,u,g,c,h,f,b,m,v,_,y;for(o=e.element,r=e.page,b=e.name_filter,v=e.group_filter,i=e.entries_per_page,d=e.data,s=e.header,g=-1,"",y=[],o.empty(),u=function(a){return function(t){e.data[a].table.group=t.target.value,l(e)}},t=0;t<d.length;t+=1)void 0!==d[t].table.group&&d[t].table.group.toString().match(/\d+/)&&(y[d[t].table.group]=y[d[t].table.group]||[],y[d[t].table.group].push(d[t]),g=Math.max(g,d[t].table.group));for((g+=1)>0&&y.length&&y[0].length&&p(y,e),n=0,c=0,_=0;c<d.length;){for((h=!0)&&!"".match(v)&&(void 0!==d[c].table.group&&d[c].table.group.toString().match(v)||(h=!1)),h&&!d[c].table.name.match(b)&&(h=!1),t=0;h&&t<s.length;t+=1)f=d[c].database[s[t][0]]||"",Array.isArray(f)&&(f=f.join("\n")),f.match(s[t][1])||(h=!1);if(h&&(_+=1)>r*i&&n<i){if(n+=1,a=$("<tr>").appendTo(o),"name"===e.table_type){for(m=$("<td>").appendTo(a),m=$("<select>",{class:"form-control"}).appendTo(m),void 0!==d[c].table.group&&d[c].table.group.toString().match(/\d{1,}/)?m.append('<option value="">None</option>'):m.append('<option selected="true" value>None</option>'),t=0;t<=g;t+=1)parseFloat(d[c].table.group)===t?m.append('<option selected="true" value="'+t+'">'+t+"</option>"):m.append('<option value="'+t+'">'+t+"</option>");m.change(u(c))}else $("<td>",{text:d[c].table.group}).appendTo(a);for(m=$("<td>",{text:d[c].table.name}).appendTo(a),t=0;t<s.length;t+=1)m=$("<td>").appendTo(a),t>0&&m.addClass("hidden-xs"),f=d[c].database[s[t][0]]||"",Array.isArray(f)&&(f=f.length<4?f.join("<br/>"):"["+f.slice(0,3).join(f.slice(0,3).join("").length<20?", ":",<br/>")+", ...] ("+f.length+")"),m.html(f)}c+=1}n<1&&e.page>-1?(e.page-=1,l(e)):n&&e.page<0&&(e.page=0),e.pagination.text(e.page+1+" / "+Math.ceil(_/i))};var d=function(e,p){var d,s,u,g,c;if(s=a(e),i.empty(),c={page:0,entries_per_page:8,name_filter:new RegExp("","i"),group_filter:new RegExp("","i")},c.data=s.data,c.header=t(s),c.header_options=s.header_options,s={},i.append("<h1>Sample List for level: "+p+"</h1>"),"name"===p)i.append("<p>Add samples to groups for reproducibility and comparisons then click the links below to load the different level data in a new window.</p>");else for(d=0;d<c.data.length;d+=1)c.data[d].table.group=c.data[d].origin_db.group;u=$("<table>",{class:"table"}).appendTo(i),g=$("<thead>").appendTo(u),n(g,c),o(g,c),c.element=$("<tbody>").appendTo(u),c.pagination=r(c),c.link_out=$("<div>").appendTo(i),c.table_type=p,l(c)};KINOME.list("levels").map(function(e){var a=KINOME.get({level:e});a.length&&d(a,e)}),e.updateMainTable=d}(KINOME);